<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 不受同源策略影响,但是他接收的要是js语句 -->
    
</head>
<body>
    <ul id="list">

    </ul>
    <script>
        // let list = document.getElementById('list');
        // function callback(data){
        //     console.log('请求成功')
        //     console.log(data)
        //     list.innerHTML = data.map(user=>`<li>
        //         ${user.name}
        //         </li>`).join('')
        // }
        // fetch('http://localhost:3000')
    //     .then(res => res.json())
    //     .then(data => {
    //        console.log(data)
    //        data.map((item) => {
    //            let li = document.createElement('li');
    //            li.innerText = item.name;
    //            list.appendChild(li);
    //        })
    //    })
    let jsonp = (url,callback) =>{
        let oScript = document.createElement('script')
        oScript.src = url
        document.body.appendChild(oScript) // 挂载到body
        window.callback = callback
    }
    jsonp('http://localhost:3000/',(data)=>{
            list.innerHTML = data.map(user=>`<li>
                ${user.name}
                </li>`).join('')
        })
    </script>
</body>
</html>